{"version":3,"sources":["views/customer/CustomerDetail.js","services/helper.js","services/product.js","firebase/index.js","services/image.js","services/customer.js"],"names":["formItemLayout","labelCol","xs","span","sm","wrapperCol","withNamespaces","match","t","Form","useForm","form","history","useHistory","useState","data","setData","setStatusName","setStatusColor","useEffect","getCustomerDetail","params","id","res","console","log","Status","rank","filter","item","color","status","users","name","notification","error","message","description","placement","duration","md","className","style","display","justifyContent","alignItems","onFinish","values","customer_id","Modal","confirm","title","icon","content","onOk","updateCustomer","success","push","onCancel","info","centered","Item","label","labelAlign","fullname","email","phone","type","block","htmlType","BaseHelper","Object","keys","forEach","isNaN","parseFloat","value","toLocaleString","currency","getLazyProducts","pagination","category_id","a","axios","AxiosConfig","api","page","limit","get","getListProducts","callback","then","catch","err","response","getToken","getProductDetail","product_id","process","updateProduct","put","createProduct","post","convertToGift","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","uploadImage","filename","file","func","ref","on","snapshot","Math","round","bytesTransferred","totalBytes","child","getDownloadURL","url","getListCustomers","filters","isBlock","patch"],"mappings":"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","file":"static/js/27.d1a4b286.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { CCol, CRow, CCard, CCardBody, CCardHeader } from \"@coreui/react\";\r\nimport { Status } from \"src/configs\";\r\nimport {\r\n  Table,\r\n  Space,\r\n  Tag,\r\n  Button,\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  notification,\r\n  Upload,\r\n  Avatar,\r\n} from \"antd\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { uploadImage } from \"src/services/image\";\r\nimport { getProductDetail, updateProduct } from \"src/services/product\";\r\nimport { getCustomerDetail, updateCustomer } from \"src/services/customer\";\r\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\r\nimport { storage } from \"src/firebase\";\r\nimport { withNamespaces } from \"react-i18next\";\r\nimport { useHistory } from \"react-router\";\r\nimport BaseHelper from \"src/services/helper\";\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 8 },\r\n  },\r\n  wrapperCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 16 },\r\n  },\r\n};\r\nconst CustomerDetail = ({ match, t }) => {\r\n  const [form] = Form.useForm();\r\n  const history = useHistory();\r\n  const [data, setData] = useState();\r\n  const [statusName, setStatusName] = useState(\"Active\");\r\n  const [statusColor, setStatusColor] = useState(\"green\");\r\n\r\n  useEffect(() => {\r\n    getCustomerDetail(match.params.id, (res) => {\r\n      console.log(\r\n        res.data,\r\n        \"Rank\",\r\n        Status.rank,\r\n        res.data.rank,\r\n        Status.rank.filter((item) => item.id == res.data.rank)[0].color\r\n      );\r\n      if (res.status === 200) {\r\n        setData(res.data);\r\n        setStatusName(\r\n          Status.users.filter((item) => item.id == res.data.status)[0].name\r\n        );\r\n        setStatusColor(\r\n          Status.users.filter((item) => item.id == res.data.status)[0].color\r\n        );\r\n      } else {\r\n        notification.error({\r\n          message: t(`Notification`),\r\n          description: `Get Driver failed.`,\r\n          placement: `bottomRight`,\r\n          duration: 1.5,\r\n        });\r\n      }\r\n    });\r\n  }, []);\r\n  const onFinish = (values) => {\r\n    const customer_id = match.params.id;\r\n    Modal.confirm({\r\n      title: t(`Update Customer`),\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: t(\r\n        `You are going to update this customer? Are you sure you want to do this? You can't reverse this`\r\n      ),\r\n      onOk() {\r\n        updateCustomer(customer_id, data?.status == 1 ? false : true, (res) => {\r\n          if (res.status === 200) {\r\n            notification.success({\r\n              message: t(`Notification`),\r\n              description: `Update customer successful.`,\r\n              placement: `bottomRight`,\r\n              duration: 1.5,\r\n            });\r\n            history.push(\"/customers\");\r\n          } else {\r\n            notification.error({\r\n              message: t(`Notification`),\r\n              description: `Update customer failed.`,\r\n              placement: `bottomRight`,\r\n              duration: 1.5,\r\n            });\r\n          }\r\n        });\r\n      },\r\n      onCancel() {\r\n        notification.info({\r\n          message: t(`Notification`),\r\n          description: t(`Stop update customer`),\r\n          placement: `bottomRight`,\r\n          duration: 1.5,\r\n        });\r\n      },\r\n      centered: true,\r\n    });\r\n  };\r\n  return (\r\n    <CRow>\r\n      <CCol xs=\"12\" md=\"9\" className=\"mb-4\">\r\n        <CCard>\r\n          <CCardHeader\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"baseline\",\r\n            }}\r\n          >\r\n            {t(\"Customer Detail\")}\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <Form form={form} {...formItemLayout} onFinish={onFinish}>\r\n              <Form.Item label={t(\"Name\")} labelAlign=\"left\" name=\"fullname\">\r\n                <p>{`${data?.fullname}`}</p>\r\n              </Form.Item>\r\n              <Form.Item label={t(\"Email\")} labelAlign=\"left\" name=\"email\">\r\n                <p>{`${data?.email}`}</p>\r\n              </Form.Item>\r\n              <Form.Item label={t(\"Phone\")} labelAlign=\"left\" name=\"phone\">\r\n                <p>{`${data?.phone}`}</p>\r\n              </Form.Item>\r\n              <Form.Item label={t(\"Rank\")} labelAlign=\"left\" name=\"rank\">\r\n                <Tag\r\n                  color={\r\n                    Status.rank.filter((item) => item.id == data?.rank)[0]\r\n                      ?.color\r\n                  }\r\n                >\r\n                  {Status.rank.filter((item) => item.id == data?.rank)[0]?.name}\r\n                </Tag>\r\n              </Form.Item>\r\n              <Form.Item label={t(\"Status\")} labelAlign=\"left\" name=\"status\">\r\n                <Tag\r\n                  color={\r\n                    Status.users.filter((item) => item.id == data?.status)[0]\r\n                      ?.color\r\n                  }\r\n                >\r\n                  {\r\n                    Status.users.filter((item) => item.id == data?.status)[0]\r\n                      ?.name\r\n                  }\r\n                </Tag>\r\n              </Form.Item>\r\n              <Button\r\n                type=\"primary\"\r\n                block\r\n                htmlType=\"submit\"\r\n                className={`${\r\n                  data?.status == 1 ? \"btn-danger\" : \"btn-success\"\r\n                }`}\r\n              >\r\n                {t(`${data?.status == 1 ? \"Block\" : \"Unblock\"}`)}\r\n              </Button>\r\n            </Form>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  );\r\n};\r\n\r\nexport default withNamespaces()(CustomerDetail);\r\n","class BaseHelper {\r\n  formatData(values) {\r\n    Object.keys(values).forEach((item) => {\r\n      if (!isNaN(values[item])) {\r\n        values[item] = parseFloat(values[item]);\r\n      } else {\r\n      }\r\n    });\r\n    return values;\r\n  }\r\n  formatVND(value) {\r\n    return value.toLocaleString(\"it-IT\", {\r\n      style: \"currency\",\r\n      currency: \"USD\",\r\n    });\r\n  }\r\n}\r\n\r\nexport default new BaseHelper();\r\n","import axios from \"axios\";\r\nimport { AxiosConfig } from \"src/configs\";\r\nimport { getToken, getLazyToken } from \"./auth\";\r\n/**\r\n * 1 cách optimize cách viết này đó chính là tạo 1 hook là useResourceData() nma lười quá nên tạm v\r\n */\r\nexport async function getLazyProducts(pagination, category_id) {\r\n  const axios = AxiosConfig();\r\n  let api = \"\";\r\n  if (category_id) {\r\n    api = `/product?page=${pagination.page || 1}&limit=${\r\n      pagination.limit || 100\r\n    }&category=${category_id}`;\r\n  } else {\r\n    api = `/product?page=${pagination.page || 1}&limit=${\r\n      pagination.limit || 100\r\n    }`;\r\n  }\r\n  return await axios.get(api);\r\n}\r\nexport function getListProducts(pagination, category_id, callback) {\r\n  const axios = AxiosConfig();\r\n  let api = \"\";\r\n  if (category_id) {\r\n    api = `/product?page=${pagination.page || 1}&limit=${\r\n      pagination.limit || 100\r\n    }&category=${category_id}`;\r\n  } else {\r\n    api = `/product?page=${pagination.page || 1}&limit=${\r\n      pagination.limit || 100\r\n    }`;\r\n  }\r\n  axios\r\n    .get(api)\r\n    .then((res) => {\r\n      callback({ ...res });\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status == 401 || err.response.status == 403) {\r\n          getToken(() => {\r\n            getListProducts(pagination, category_id, callback);\r\n          });\r\n        } else {\r\n          callback({\r\n            ...err.response,\r\n            message: \"Get list products failed!\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function getProductDetail(product_id, callback) {\r\n  const axios = AxiosConfig();\r\n\r\n  axios\r\n    .get(`${process.env.REACT_APP_API}product/${product_id}`)\r\n    .then((res) => {\r\n      callback(res);\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        console.log(err.response);\r\n        if (err.response.status === 401 || err.response.status === 403) {\r\n          getToken(() => {\r\n            getProductDetail(product_id, callback);\r\n          });\r\n        } else {\r\n          callback(err.response.data);\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function updateProduct(product_id, data, callback) {\r\n  const axios = AxiosConfig();\r\n  axios\r\n    .put(`/product/detail/${product_id}`, data)\r\n    .then((res) => {\r\n      callback(res);\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status === 403 || err.response.status == 401) {\r\n          getToken(() => {\r\n            updateProduct(product_id, data, callback);\r\n          });\r\n        } else {\r\n          callback(err.response.data);\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function createProduct(data, callback) {\r\n  const axios = AxiosConfig();\r\n  axios\r\n    .post(`/product`, data)\r\n    .then((res) => {\r\n      callback(res);\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status === 403 || err.response.status == 401) {\r\n          getToken(() => {\r\n            createProduct(data, callback);\r\n          });\r\n        } else {\r\n          callback(err.response.data);\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function convertToGift(product_id, data, callback) {\r\n  const axios = AxiosConfig();\r\n  axios\r\n    .put(`/product/convert/${product_id}`, data)\r\n    .then((res) => {\r\n      callback(res);\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status === 403 || err.response.status == 401) {\r\n          getToken(() => {\r\n            convertToGift(product_id, data, callback);\r\n          });\r\n        } else {\r\n          callback(err.response.data);\r\n        }\r\n      }\r\n    });\r\n}\r\n","import firebase, { initializeApp } from \"firebase/compat/app\";\r\nimport \"firebase/compat/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAT8Cky7hDDnXaLEUaX5psnHgJTr6dRHFA\",\r\n  authDomain: \"candle-upload-image.firebaseapp.com\",\r\n  projectId: \"candle-upload-image\",\r\n  storageBucket: \"candle-upload-image.appspot.com\",\r\n  messagingSenderId: \"710341271634\",\r\n  appId: \"1:710341271634:web:4376e9abe3b1923b72bf8b\",\r\n  measurementId: \"G-ZZRD4Z2Y99\",\r\n};\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst storage = firebase.storage();\r\n\r\nexport { storage, firebase as default };\r\n","import { storage } from \"src/firebase\";\r\nimport { notification } from \"antd\";\r\n//@params func here is a setState in react hook\r\nexport const uploadImage = (filename, file, func) => {\r\n  const uploadTask = storage.ref(`images/${filename}`).put(file);\r\n  uploadTask.on(\r\n    \"state_changed\",\r\n    (snapshot) => {\r\n      const progress = Math.round(\r\n        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      );\r\n      if (progress == 100) {\r\n        notification.success({\r\n          message: `Notification`,\r\n          description: \"Add avatar successfully!\",\r\n          placement: `bottomRight`,\r\n          duration: 1.5,\r\n        });\r\n      }\r\n    },\r\n    (error) => {\r\n      console.log(error);\r\n    },\r\n    () => {\r\n      storage\r\n        .ref(\"images\")\r\n        .child(filename)\r\n        .getDownloadURL()\r\n        .then((url) => {\r\n          func(url);\r\n        });\r\n    }\r\n  );\r\n};\r\n","import { AxiosConfig } from \"src/configs\";\r\nimport { getToken } from \"./auth\";\r\n\r\nexport function getListCustomers(pagination, filters, callback) {\r\n  const axios = AxiosConfig();\r\n  let api = `/customers?page=${pagination.page || 1}&limit=${\r\n    pagination.limit || 100\r\n  }`;\r\n  if (filters && filters?.rank) {\r\n    api += `&rank=`;\r\n    filters.rank.forEach((item) => {\r\n      api += `${item},`;\r\n    });\r\n  }\r\n\r\n  axios\r\n    .get(api)\r\n    .then((res) => {\r\n      callback({ ...res });\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status == 401 || err.response.status == 403) {\r\n          getToken(() => {\r\n            getListCustomers(pagination, filters, callback);\r\n          });\r\n        } else {\r\n          callback({\r\n            ...err.response,\r\n            message: \"Get list customers failed!\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function getCustomerDetail(customer_id, callback) {\r\n  const axios = AxiosConfig();\r\n  let api = `/customers/${customer_id}`;\r\n  axios\r\n    .get(api)\r\n    .then((res) => {\r\n      callback({ ...res });\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status == 401 || err.response.status == 403) {\r\n          getToken(() => {\r\n            getCustomerDetail(customer_id, callback);\r\n          });\r\n        } else {\r\n          callback({\r\n            ...err.response,\r\n            message: \"Get customer detail failed!\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n}\r\n\r\nexport function updateCustomer(customer_id, isBlock, callback) {\r\n  const axios = AxiosConfig();\r\n  let api = ``;\r\n  if (isBlock) {\r\n    api = `/customers/unblock/${customer_id}`;\r\n  } else {\r\n    api = `/customers/block/${customer_id}`;\r\n  }\r\n  axios\r\n    .patch(api)\r\n    .then((res) => {\r\n      callback({ ...res });\r\n    })\r\n    .catch((err) => {\r\n      if (err.response) {\r\n        if (err.response.status == 401 || err.response.status == 403) {\r\n          getToken(() => {\r\n            updateCustomer(customer_id, isBlock, callback);\r\n          });\r\n        } else {\r\n          callback({\r\n            ...err.response,\r\n            message: \"Get customer detail failed!\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n}\r\n"],"sourceRoot":""}